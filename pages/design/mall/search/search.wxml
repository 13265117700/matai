<searchbar bindsearchInput="onsearchInput" bind:focus="bindfocus" value="{{ rules.name }}" placeText="请输入商品名称" />

<view class='content'>
	<block wx:if="{{lisss == 1}}">
		<view class='history-list-group'>
			<view class='history-title'>
				<view class='history-title-1'>历史记录</view>
				<view class='history-clear' bindtap='onclear'>
					<image src="../../../../img/college/ss/shancu.png" />
				</view>
			</view>
			<view class='history-group'>
				<view wx:for="{{history}}" wx:key="title" class="kekuyu">
					<view data-title="{{item.title}}" bindtap="huanss">
						{{item.title}}
					</view>
				</view>
			</view>
		</view>
	</block>
	<block wx:else>
		<!-- 筛选 -->
		<view class="filter">
			<view wx:for="{{tabList}}" wx:key="state" class="tab-item {{item.state == currentTab ? 'active' : '' }}" data-state="{{item.state}}" bindtap="setCurrent">
				{{item.name}}
				<image wx:if="{{item.icon}}" class="icon" src="{{item.icon}}"></image>
			</view>
		</view>
		<!-- 商品列表 -->
		<view class="mall-1 normal">
			<block wx:if="{{list.length}}">
				<view wx:for="{{list}}" wx:key="id" class="item" data-path="../info/info?id={{item.id}}" bindtap="goPath">
					<view class="img-view" style="background-image: url({{ item.productThumbnail }})"></view>
					<view class="text">
						<view class="title">{{ item.name }}</view>
						<view class="price">
							￥{{ item.commodityPrice }} <text wx:if="{{item.sharePrice}}">+{{item.sharePrice}}共享分</text>
						</view>
					</view>
				</view>
			</block>
			<block wx:else>
				<view class="no-list">
					<image src="/img/college/gwcdat.png" mode="widthFix"></image>
					<text>暂无相关搜索结果</text>
				</view>
			</block>
		</view>
		<!-- 筛选抽屉 -->
		<view class="filter-more {{ctShow ? '' : 'hide'}}" bindtap="closeCT" style="height: calc(100vh - {{ctHeight}}px);">
			<view class="filter-more-container" catchtap="notDo">
				<scroll-view scroll-y="true" style="with: 100%; height: calc(100% - 20rpx);">
					<!-- 价格区间 -->
					<view class="row">
						<view class="title">共享分区间</view>
						<view class="row-item">
							<view class="filed">
								<input type="number" value="{{subRules.sharePrice}}" bindinput="formInputChange" data-field="sharePrice" maxlength="7" placeholder="最低共享分"></input>
								<view class="plx">-</view>
								<input type="number" value="{{subRules.sharePrice1}}" bindinput="formInputChange" data-field="sharePrice1" maxlength="7" placeholder="最高共享分"></input>
							</view>
						</view>
						<view class="row-item">
							<view class="set-points">
								<view class="item-set" catchtap="setPoints" data-point1="0" data-point2="999">0-999</view>
								<view class="item-set" catchtap="setPoints" data-point1="1000" data-point2="4999">1000-4999</view>
								<view class="item-set" catchtap="setPoints" data-point1="5000" data-point2="9999">5000-9999</view>
								<view class="item-set" catchtap="setPoints" data-point1="10000" data-point2="">1万以上</view>
							</view>
						</view>
						<view class="title">价格区间</view>
						<view class="row-item">
							<view class="filed">
								<input type="number" value="{{subRules.commodityPrice}}" bindinput="formInputChange" data-field="commodityPrice" maxlength="7" placeholder="最低价"></input>
								<view class="plx">-</view>
								<input type="number" value="{{subRules.commodityPrice1}}" bindinput="formInputChange" data-field="commodityPrice1" maxlength="7" placeholder="最高价"></input>
							</view>
						</view>
					</view>
					<!-- 品牌 -->
					<view wx:if="{{columnList.length}}" class="row">
						<view class="title">品牌</view>
						<view class="row-item">
							<view class="set-points">
								<view wx:for="{{columnList}}" wx:key="id" class="item-set {{item.id == subRules.pointsMallColumnId ? 'active' : ''}}" data-id="{{item.id}}" catchtap="changeColumn">{{item.name}}</view>
							</view>
						</view>
					</view>
				</scroll-view>
				<view class="ps-box">
					<view class="close" catchtap="closeCT">
						<mp-icon icon="close" color="#666" size="{{26}}"></mp-icon>
					</view>
					<view class="btn" catchtap="resetForm">重置</view>
					<view class="btn confirm" catchtap="bindConfirm">确定</view>
				</view>
			</view>
		</view>
	</block>
</view>